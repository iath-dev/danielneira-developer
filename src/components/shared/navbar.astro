<header class="bg-base-100 sticky top-0 z-10 w-full drop-shadow-lg">
  <div class="container mx-auto flex w-full items-center justify-between p-4">
    <div>
      <a href="./" class="btn btn-ghost btn-square">
        <img
          src="/favicon.svg"
          alt="app icon"
          class="h-12 w-12 invert dark:invert-0"
        />
      </a>
    </div>
    <nav class="flex items-center gap-4 max-lg:flex-row-reverse">
      <button id="nav-btn" class="btn btn-ghost btn-square flex lg:hidden">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          class="size-[1.2em]"
          ><path fill="currentColor" d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"
          ></path></svg
        >
      </button>
      <div id="side-menu" class="transition duration-300 lg:flex">
        <ul
          class="[&_li>a]:btn [&_li>a]:btn-ghost [&_li>a]:btn-md [&_li>a]:hover:btn-accent flex w-full gap-4 [&_li>a]:max-lg:w-full [&_li>a]:max-lg:justify-start"
        >
          <li><a href="./#about">About</a></li>
          <li><a href="./projects">Projects</a></li>
        </ul>
      </div>
    </nav>
  </div>
  <div id="overlay"></div>
</header>

<style>
  nav ul li a {
    /* @apply btn btn-sm btn-soft; */
  }
  nav ul li a:hover {
    /* @apply btn-primary; */
  }
  @media (width < 64rem) {
    #overlay {
      display: none;
      position: fixed;
      inset: 0;
      z-index: 9;
      width: 100vw;
      height: 100vh;
      background-color: color-mix(
        in srgb,
        var(--color-base-200) 50%,
        transparent
      );
    }

    #overlay.open {
      display: block;
    }

    #side-menu {
      width: min(15em, 100%);
      position: fixed;
      top: 0;
      right: -100%;
      z-index: 10;
      height: 100dvh;
      background-color: color-mix(
        in srgb,
        var(--color-base-200) 100%,
        black 10%
      );
      transition: right 300ms ease-in-out;
      padding: 1em;
    }

    #side-menu.open {
      right: 0;
    }

    #side-menu ul {
      display: flex;
      flex-direction: column;
    }
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const media = window.matchMedia("'(width < 64rem)");

    const navBtn = document.getElementById('nav-btn');
    const sidebar = document.getElementById('side-menu');
    const overlay = document.getElementById('overlay');

    media.addEventListener('change', updateNavbar);

    function updateNavbar(e: any) {
      const isMobile = e.matches;
      if (isMobile) {
        sidebar?.setAttribute('inert', '');
      } else {
        sidebar?.removeAttribute('inert');
      }
    }

    function toggleMenu() {
      sidebar?.classList.toggle('open');
      overlay?.classList.toggle('open');
    }

    if (navBtn && sidebar && overlay) {
      navBtn.addEventListener('click', toggleMenu);
      overlay.addEventListener('click', toggleMenu);
    }
  });
</script>
